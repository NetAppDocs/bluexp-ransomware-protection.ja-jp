---
sidebar: sidebar 
permalink: rp-use-recover.html 
keywords: ransomware protection recovery, recover from a ransomware attack, recovery point, RPA 
summary: 攻撃を受けたあと、BlueXPのランサムウェア対策は、セカンダリストレージ上のバックアップデータがクリーンであることを検証し、実際のリカバリポイント（RPA）を提案し、耐障害性に優れたリカバリのワークフローをオーケストレーションします。 
---
= ランサムウェア攻撃からのリカバリ（インシデントの中和後）
:hardbreaks:
:allow-uri-read: 
:icons: font
:imagesdir: ./media


[role="lead"]
ワークロードが「Restore Needed」とマークされると、BlueXPランサムウェア対策はRecovery Point Actual（RPA；実際のリカバリポイント）を推奨し、クラッシュに強いリカバリのためのワークフローをオーケストレーションします。

* アプリケーションやVMがSnapCenterで管理されている場合、BlueXPランサムウェア対策は、アプリケーションやVMをアプリケーションと整合性のあるプロセスまたはVMと整合性のあるプロセスを使用して以前の状態と最後のトランザクションにリストアします。アプリケーションまたはVM整合性リストアでは、ストレージに含まれていないデータ（キャッシュ内のデータやI/O処理中のデータなど）がボリューム内のデータに追加されます。
* アプリケーションまたはVMがSnapCenterで_not_managedであり、BlueXPのバックアップとリカバリまたはBlueXPのランサムウェア対策で管理されている場合、BlueXPのランサムウェア対策はcrash-consistentリストアを実行します。たとえば、次のように、ボリューム内の同じ時点のすべてのデータがリストアされます。 システムがクラッシュした場合。
+
ワークロードをリストアするには、すべてのボリューム、特定のボリューム、または特定のファイルを選択します。




TIP: ワークロードのリカバリは実行中のワークロードに影響を与えるリカバリプロセスは、適切な関係者と調整する必要があります。

ワークロードのリストアステータスは次のいずれかになります。

* *リストアが必要です*：ワークロードをリストアする必要があります。
* *実行中*：リストア処理を実行中です。
* *リストア済み*：ワークロードがリストアされました。
* *失敗*：ワークロードのリストアプロセスを完了できませんでした。




== リストアの準備が完了したワークロードを表示する

「Restore Needed」リカバリステータスのワークロードを確認します。

.手順
. 次のいずれかを実行します。
+
** ダッシュボードの[Alerts]ペインで[Restore Needed]の合計を確認し、*[View All]*を選択します。
** メニューから* Recovery *を選択します。


. [リカバリ]*ページでワークロード情報を確認します。
+
image:screen-recovery2.png["[Recovery]ページ"]





== SnapCenterで管理されているワークロードをリストアする

ストレージ管理者は、BlueXPのランサムウェア対策を使用して、推奨されるリストアポイントまたは推奨されるリストアポイントからワークロードをリストアする最適な方法を判断できます。

リストアに必要に応じて、アプリケーションの状態が変更されます。制御ファイルがバックアップに含まれている場合、アプリケーションは制御ファイルから以前の状態にリストアされます。リストアが完了すると、アプリケーションが読み取り/書き込みモードで開きます。

.手順
. BlueXPのランサムウェア対策メニューから、*リカバリ*を選択します。
. [リカバリ]*ページでワークロード情報を確認します。
. 「Restore Needed」状態のワークロードを選択します。
. リストアするには、*[リストア]*を選択します。
. *リストア範囲*：アプリケーションと整合性がある（VMのSnapCenterの場合はリストア範囲がVM単位）
. *ソース*:ソースの横にある下向き矢印を選択すると、詳細が表示されます。データのリストアに使用する復元ポイントを選択します。
+

TIP: BlueXPのランサムウェア対策は、インシデント発生直前の最新バックアップとして最適なリストアポイントを特定し、「推奨」を表示します。

. * Destination *：Destinationの横にある下向き矢印を選択すると、詳細が表示されます。
+
.. 元の場所または別の場所を選択します。
.. 作業環境を選択します。
.. Storage VMを選択します。


. 元のデスティネーションにワークロードをリストアするための十分なスペースがない場合は、[Temporary storage]行が表示されます。一時ストレージを選択してワークロードデータをリストアできます。リストアされたデータは、一時ストレージから元の場所にコピーされます。[一時ストレージ]行の*下矢印*をクリックし、デスティネーションクラスタ、Storage VM、およびローカル階層を設定します。
. [ 保存（ Save ） ] を選択します。
. 「 * 次へ * 」を選択します。
. 選択内容を確認します。
. [* Restore] を選択します。
. トップメニューから* Recovery *を選択し、[リカバリ]ページで処理のステータスが状態間を移動するワークロードを確認します。




== SnapCenterで管理されていないワークロードをリストアする

ストレージ管理者は、BlueXPのランサムウェア対策を使用して、推奨されるリストアポイントまたは推奨されるリストアポイントからワークロードをリストアする最適な方法を判断できます。

セキュリティストレージ管理者は、さまざまなレベルでデータをリカバリできます。

* すべてのボリュームをリカバリ
* ボリュームレベルまたはファイルおよびフォルダレベルでアプリケーションをリカバリします。
* ボリュームレベル、ディレクトリレベル、またはファイル/フォルダレベルでファイル共有をリカバリします。
* データストアからVMレベルでリカバリ


このプロセスはワークロードの種類によって多少異なります。

.手順
. BlueXPのランサムウェア対策メニューから、*リカバリ*を選択します。
. [リカバリ]*ページでワークロード情報を確認します。
. 「Restore Needed」状態のワークロードを選択します。
. リストアするには、*[リストア]*を選択します。
. *リストア範囲*：完了するリストアのタイプを選択します。
+
** すべてのボリューム
** ボリューム別
** ファイル別：リストアするフォルダまたは単一のファイルを指定できます。
+

TIP: 最大100個のファイルまたは1つのフォルダを選択できます。



. アプリケーション、ボリューム、ファイルのいずれを選択したかに応じて、次のいずれかの手順を実行します。




=== すべてのボリュームをリストア

. BlueXPのランサムウェア対策メニューから、*リカバリ*を選択します。
. 「Restore Needed」状態のワークロードを選択します。
. リストアするには、*[リストア]*を選択します。
. [リストア]ページの[リストア]範囲で、*[すべてのボリューム]*を選択します。
+
image:screen-recovery-all-volumes.png["スヘテノホリユウムヘエシ"]

. *ソース*:ソースの横にある下向き矢印を選択すると、詳細が表示されます。
+
.. データのリストアに使用する復元ポイントを選択します。
+

TIP: BlueXPのランサムウェア対策は、インシデント発生直前の最新バックアップとして最適なリストアポイントを特定し、「すべてのボリュームで最も安全」を示します。つまり、最初に検出されたボリュームに対する最初の攻撃の前に、すべてのボリュームがコピーにリストアされます。



. * Destination *：Destinationの横にある下向き矢印を選択すると、詳細が表示されます。
+
.. 作業環境を選択します。
.. Storage VMを選択します。
.. アグリゲートを選択します。
.. すべての新しいボリュームの先頭に付加されるボリュームプレフィックスを変更します。
+

TIP: 新しいボリューム名は、プレフィックス+元のボリューム名+バックアップ名+バックアップ日付として表示されます。



. [ 保存（ Save ） ] を選択します。
. 「 * 次へ * 」を選択します。
. 選択内容を確認します。
. [* Restore] を選択します。
. トップメニューから* Recovery *を選択し、[リカバリ]ページで処理のステータスが状態間を移動するワークロードを確認します。




=== アプリケーションワークロードをボリュームレベルでリストア

. BlueXPのランサムウェア対策メニューから、*リカバリ*を選択します。
. 「Restore Needed」状態のアプリケーションワークロードを選択します。
. リストアするには、*[リストア]*を選択します。
. [リストア]ページの[リストア対象]で、*[ボリューム別]*を選択します。
+
image:screen-recovery-byvolume.png["ホリユウムヘエシ"]

. ボリュームのリストで、リストアするボリュームを選択します。
. *ソース*:ソースの横にある下向き矢印を選択すると、詳細が表示されます。
+
.. データのリストアに使用する復元ポイントを選択します。
+

TIP: BlueXPのランサムウェア対策は、インシデント発生直前の最新バックアップとして最適なリストアポイントを特定し、「推奨」を表示します。



. * Destination *：Destinationの横にある下向き矢印を選択すると、詳細が表示されます。
+
.. 作業環境を選択します。
.. Storage VMを選択します。
.. アグリゲートを選択します。
.. 新しいボリューム名を確認します。
+

TIP: 新しいボリューム名は、元のボリューム名+バックアップ名+バックアップ日付として表示されます。



. [ 保存（ Save ） ] を選択します。
. 「 * 次へ * 」を選択します。
. 選択内容を確認します。
. [* Restore] を選択します。
. トップメニューから* Recovery *を選択し、[リカバリ]ページで処理のステータスが状態間を移動するワークロードを確認します。




=== ファイルレベルでのアプリケーションワークロードのリストア

アプリケーションワークロードをファイルレベルでリストアする前に、影響を受けるファイルのリストを表示できます。[アラート]ページにアクセスして、影響を受けるファイルのリストをダウンロードできます。次に、[Recovery]ページを使用してリストをアップロードし、復元するファイルを選択します。

アプリケーションワークロードは、同じ作業環境または異なる作業環境にファイルレベルでリストアできます。

.影響を受けるファイルのリストを取得する手順
[アラート]ページを使用して、影響を受けるファイルのリストを取得します。


TIP: ボリュームに複数のアラートがある場合は、各アラートの影響を受けるファイルのCSVリストをダウンロードする必要があります。

. BlueXPのランサムウェア対策メニューから、*アラート*を選択します。
. [アラート]ページで、ワークロードで結果をソートして、リストアするアプリケーションワークロードのアラートを表示します。
. そのワークロードのアラートのリストからアラートを選択します。
. そのアラートでは、インシデントを1つ選択します。
+
image:screen-alerts-incidents-impacted-files.png["特定のアラートの影響を受けるファイルのリスト"]

. ファイルの全リストを表示するには、[インパクトを受けるファイル]ペインの上部にある*[ここをクリック]*を選択します。
. そのインシデントのダウンロードアイコンを選択し、影響を受けるファイルのリストをCSV形式でダウンロードします。


.これらのファイルのリストア手順
. BlueXPのランサムウェア対策メニューから、*リカバリ*を選択します。
. 「Restore Needed」状態のアプリケーションワークロードを選択します。
. リストアするには、*[リストア]*を選択します。
. [リストア]ページの[リストア対象]で、*[ファイル別]*を選択します。
. ボリュームのリストで、リストアするファイルが含まれているボリュームを選択します。
. *リストアポイント*：*リストアポイント*の横にある下向き矢印を選択して、詳細を表示します。データのリストアに使用する復元ポイントを選択します。
+

NOTE: [Restore points]ペインの[Reason]列に、Snapshotまたはバックアップの理由が[Scheduled]または[Automated response to ransomware incident]として表示されます。

. *ファイル*：
+
** *ファイルを自動的に選択*：BlueXPランサムウェア対策でリストアするファイルを選択します。
** *ファイルのリストをアップロード*：[アラート]ページから取得した、または既存の影響を受けるファイルのリストを含むCSVファイルをアップロードします。一度に最大10、000個のファイルをリストアできます。
+
image:screen-recovery-app-by-file-upload-csv.png["アラートの影響を受けるファイルをリストしたCSVファイルをアップロード"]

** *ファイルを手動で選択*:復元するファイルを最大10,000個、または1つのフォルダを選択します。
+
image:screen-recovery-app-by-file-select-files.png["リストアするファイルを手動で選択"]

+

NOTE: 選択した復元ポイントを使用してファイルを復元できない場合は、復元できないファイルの数を示すメッセージが表示され、*影響を受けるファイルのリストをダウンロード*を選択してそれらのファイルのリストをダウンロードできます。



. * Destination *：Destinationの横にある下向き矢印を選択すると、詳細が表示されます。
+
.. データのリストア先として、元のソースの場所または指定可能な別の場所を選択します。
+

TIP: 元のファイルまたはディレクトリはリストアされたデータで上書きされますが、新しい名前を指定しないかぎり、元のファイル名とフォルダ名は変わりません。

.. 作業環境を選択します。
.. Storage VMを選択します。
.. 必要に応じて、パスを入力します。
+

TIP: リストアのパスを指定しない場合、ファイルは最上位のディレクトリにある新しいボリュームにリストアされます。

.. リストアされたファイルまたはディレクトリの名前を現在の場所と同じ名前にするか、別の名前にするかを選択します。


. 「 * 次へ * 」を選択します。
. 選択内容を確認します。
. [* Restore] を選択します。
. トップメニューから* Recovery *を選択し、[リカバリ]ページで処理のステータスが状態間を移動するワークロードを確認します。




=== ファイル共有またはデータストアのリストア

. リストアするファイル共有またはデータストアを選択したら、[リストア]ページの[リストア対象]で*[ボリューム別]*を選択します。
+
image:screen-recovery-fileshare.png["ファイル共有のリカバリを示す[Recovery]ページ"]

. ボリュームのリストで、リストアするボリュームを選択します。
. *ソース*:ソースの横にある下向き矢印を選択すると、詳細が表示されます。
+
.. データのリストアに使用する復元ポイントを選択します。
+

TIP: BlueXPのランサムウェア対策は、インシデント発生直前の最新バックアップとして最適なリストアポイントを特定し、「推奨」を表示します。



. * Destination *：Destinationの横にある下向き矢印を選択すると、詳細が表示されます。
+
.. データのリストア先として、元のソースの場所または指定可能な別の場所を選択します。
+

TIP: 元のファイルまたはディレクトリはリストアされたデータで上書きされますが、新しい名前を指定しないかぎり、元のファイル名とフォルダ名は変わりません。

.. 作業環境を選択します。
.. Storage VMを選択します。
.. 必要に応じて、パスを入力します。
+

TIP: リストアのパスを指定しない場合、ファイルは最上位のディレクトリにある新しいボリュームにリストアされます。



. [ 保存（ Save ） ] を選択します。
. 選択内容を確認します。
. [* Restore] を選択します。
. メニューから*[リカバリ]*を選択して、処理のステータスが状態間を移動する[リカバリ]ページでワークロードを確認します。




=== VMレベルでのVMファイル共有のリストア

リストアするVMを選択したあと、[Recovery]ページで次の手順を実行します。

. *ソース*:ソースの横にある下向き矢印を選択すると、詳細が表示されます。
+
image:screen-recovery-vm.png["リストア中のVMを示す[Recovery]ページ"]

. データのリストアに使用する復元ポイントを選択します。
. *目的地*：元の場所に移動します。
. 「 * 次へ * 」を選択します。
. 選択内容を確認します。
. [* Restore] を選択します。
. メニューから*[リカバリ]*を選択して、処理のステータスが状態間を移動する[リカバリ]ページでワークロードを確認します。

